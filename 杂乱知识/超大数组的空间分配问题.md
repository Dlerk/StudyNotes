
&emsp;在C或者C++中，我们通常在在函数(包括main函数)中定义数组,但这通常是对于一些容量小的数据。
&emsp;当我们有大量的数据需要处理的时候，比如1GB大小的数据，按照常规的方式在函数中定义数组空间，往往会运行出错(Stack overflow)，那么如何解决这样的问题呢？

> 在C++中，在函数(包括main函数)中定义超大数组，内存为栈所分配的最大空间为4M，因此在子函数或者main函数中定义超大数组的方式是万万行不通的。

---

### 分配空间

&emsp;在C++程序中，分配空间有两种：动态分配空间和静态分配空间——最直观的理解是编写代码时分配空间大小还是运行时动态分配空间大小。

&emsp;动态分配和静态分配，最大的不同是对于内存空间的不同，动态分配系统分配的内存中堆区域，静态分配分配的是内存中栈区域。


#### 静态分配

&emsp;对于静态分配，占用的是内存中栈区域，系统对于栈区域大小的限制，就决定了静态分配时报错的空间。

首先我们先来看看系统对于Stack空间的限制大小是多少：

```cpp
$ulimit -a |grep stack

stack size (kbytes, -s) 8192
```
&emsp;我们发现对于栈区域的限制大小是8MB，但是我们程序要用的栈空间确实10MB所以必然导致运行时报段错误，那么现在对于这个问题来说，有三种解决方案:
+ 第一种，放弃静态分配，改用动态分配，对于较大的区域，推荐使用堆区域，因为如果出现栈溢出很容易导致一些漏洞的出现，导致系统权限被攻击。
+ 第二种，坚持探索解决方案，那么现在要做的就是临时修改栈的大小，采用如下命令：
  ```cpp
    $ulimit -s 20480 #20M
    $ulimit -s
    20480
  ```
  这样就临时的修改了系统对于栈空间最大值的限制，在编译运行就不会报错了。
+ 第三种:为超大数组创建为一个全局数组。